<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Apex Tracker</title>
    <style>
        :root { --primary: #1e3799; --secondary: #4a69bd; --success: #27ae60; --danger: #eb4d4b; --bg: #f8f9fa; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); margin: 0; padding: 15px; padding-bottom: 80px; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        h2 { color: var(--primary); font-size: 1.2rem; margin-top: 0; border-bottom: 2px solid var(--bg); padding-bottom: 8px; }
        
        /* Checklist Style */
        .workout-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }
        .workout-info { display: flex; align-items: center; gap: 12px; }
        input[type="checkbox"] { width: 24px; height: 24px; accent-color: var(--success); }
        .ex-name { font-weight: 600; font-size: 1rem; }
        .input-weight { width: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; text-align: center; }

        /* Timer Bar */
        #timer-bar { position: fixed; bottom: 0; left: 0; right: 0; background: var(--primary); color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); z-index: 1000; }
        .timer-btn { background: white; color: var(--primary); border: none; padding: 8px 15px; border-radius: 20px; font-weight: bold; cursor: pointer; }

        /* Weight Log Table */
        .scroll-box { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        th, td { text-align: left; padding: 10px; border-bottom: 1px solid #eee; }
        th { color: #888; text-transform: uppercase; font-size: 0.75rem; }

        .btn-save { width: 100%; background: var(--success); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>Today's Workout</h2>
        <div id="exercise-list">
            <div class="workout-row">
                <div class="workout-info">
                    <input type="checkbox" id="chk-leg">
                    <span class="ex-name">Leg Press</span>
                </div>
                <input type="number" id="val-leg" class="input-weight" placeholder="lbs">
            </div>
            <div class="workout-row">
                <div class="workout-info">
                    <input type="checkbox" id="chk-chest">
                    <span class="ex-name">Chest Press</span>
                </div>
                <input type="number" id="val-chest" class="input-weight" placeholder="lbs">
            </div>
            <div class="workout-row">
                <div class="workout-info">
                    <input type="checkbox" id="chk-row">
                    <span class="ex-name">Cable Row</span>
                </div>
                <input type="number" id="val-row" class="input-weight" placeholder="lbs">
            </div>
            <div class="workout-row">
                <div class="workout-info">
                    <input type="checkbox" id="chk-lat">
                    <span class="ex-name">Lat Pulldown</span>
                </div>
                <input type="number" id="val-lat" class="input-weight" placeholder="lbs">
            </div>
            <div class="workout-row">
                <div class="workout-info">
                    <input type="checkbox" id="chk-shoulder">
                    <span class="ex-name">Shoulder Press</span>
                </div>
                <input type="number" id="val-shoulder" class="input-weight" placeholder="lbs">
            </div>
        </div>
        <button class="btn-save" onclick="saveFullLog()">Save Workout Data</button>
    </div>

    <div class="card">
        <h2>Body Weight Log</h2>
        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <input type="number" id="body-weight" placeholder="lbs" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
            <button onclick="saveBodyWeight()" class="btn-add" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 5px;">Log</button>
        </div>
        <div class="scroll-box">
            <table id="history-table">
                <thead><tr><th>Date</th><th>Body</th><th>Lifts</th></tr></thead>
                <tbody id="history-body"></tbody>
            </table>
        </div>
    </div>

    <div id="timer-bar">
        <span id="timer-display">Ready for next set?</span>
        <button class="timer-btn" onclick="startRest(60)">Start 60s Rest</button>
    </div>

<script>
    // Timer Logic
    let timerInterval;
    function startRest(seconds) {
        clearInterval(timerInterval);
        let timeLeft = seconds;
        document.getElementById('timer-display').innerText = `Resting: ${timeLeft}s`;
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('timer-display').innerText = `Resting: ${timeLeft}s`;
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                document.getElementById('timer-display').innerText = "REST DONE!";
                if (window.navigator.vibrate) window.navigator.vibrate([200, 100, 200]);
            }
        }, 1000);
    }

    // Storage Logic
    function saveFullLog() {
        const date = new Date().toLocaleDateString();
        const lifts = {
            leg: document.getElementById('val-leg').value,
            chest: document.getElementById('val-chest').value,
            row: document.getElementById('val-row').value,
            lat: document.getElementById('val-lat').value,
            shoulder: document.getElementById('val-shoulder').value
        };
        
        let logs = JSON.parse(localStorage.getItem('apex_history') || '[]');
        logs.push({ date, type: 'workout', data: lifts });
        localStorage.setItem('apex_history', JSON.stringify(logs));
        alert("Workout saved!");
        renderHistory();
    }

    function saveBodyWeight() {
        const date = new Date().toLocaleDateString();
        const weight = document.getElementById('body-weight').value;
        if (!weight) return;
        
        let logs = JSON.parse(localStorage.getItem('apex_history') || '[]');
        logs.push({ date, type: 'weight', data: weight });
        localStorage.setItem('apex_history', JSON.stringify(logs));
        document.getElementById('body-weight').value = '';
        renderHistory();
    }

    function renderHistory() {
        const logs = JSON.parse(localStorage.getItem('apex_history') || '[]');
        const body = document.getElementById('history-body');
        body.innerHTML = '';
        
        logs.reverse().slice(0, 10).forEach(log => {
            let detail = log.type === 'weight' ? `${log.data} lbs` : "Lifts Logged";
            body.innerHTML += `<tr><td>${log.date}</td><td>${log.type === 'weight' ? log.data : '-'}</td><td>${log.type === 'workout' ? 'âœ…' : '-'}</td></tr>`;
        });
    }

    renderHistory();
</script>
</body>
</html>
